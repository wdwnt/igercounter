<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans|Open+Sans+Condensed:700" rel="stylesheet">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

		<style>
			body {
				font-family: 'Open Sans', sans-serif;
			}

			header {
				background: #1b7cf5;
				height: 50px;
				margin-top: 50px;
			}

			h2 {
				font-family: 'Open Sans Condensed', sans-serif;
				font-weight: 700;
			}

			#card {
				background: #FFF;
				padding: 20px;
				box-shadow: 0px -5px 5px 0px rgba(0,0,0,0.2);
				overflow: hidden;
			}

			#card ul {
				list-style: none;
				margin: 0;
				padding: 0;
			}

			#card li {
				float: left;
				width: 50%;
			}

			#card li .image {
				background-position: 50%;
				background-size: cover;
				border: 1px solid #DCDCDC;
				width: 100px;
				height: 75px;
				float: left;
				margin-right: 20px;
			}
		</style>

	</head>
	<body>


		<div class="container">
			<header></header>
			<div class="row">
				<div class="col-sm-12">
					<div id="card">
						<h2>Today's Park Hours</h2>
						<ul id="parks">
						</ul>
					</div>
				</div>
			</div>
		</div>



		<script type="text/javascript">
			const API_URL = 'https://wdwntnowapi.azurewebsites.net/api/v2/mobile/parks';
			const BACKGROUND_IMAGE = '';

			const getParameterByName = (name) => {
				let url = window.location.href;
				name = name.replace(/[\[\]]/g, '\\$&');
				let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
				results = regex.exec(url);
				if (!results) return null;
				if (!results[2]) return '';
				return decodeURIComponent(results[2].replace(/\+/g, ' '));
			}

			const ul = document.getElementById('parks');
			const destination = getParameterByName('destination') || 'wdw';
			const background = getParameterByName('background');

			fetch(API_URL).then(res => res.json()).then((parks) => {
				// load the data into the page
				parks.filter((park) => {
					return park.destination === destination;
				}).forEach((park) => {
					const li = document.createElement('li');
					li.innerHTML = `
						<div class="image" style="background-image: url('${park.imageUrl}');"></div>
						<h3>${park.name}</h3>
						<p>Todays Hours: ${park.todaysHours}</p>
					`;
					ul.appendChild(li);
				});
			});

			document.querySelector('body').style.backgroundImage = `url(${background})` || '';
		</script>
	</body>
</html>
